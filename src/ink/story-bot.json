{
  "inkVersion": 17,
  "root": [
    {
      "->": "start"
    },
    "done",
    {
      "start": [
        [
          [
            "^<span class=\"quot\">Hello!</span> How are you2?",
            "\n",
            [
              "ev",
              {
                "^->": "start.0.g-0.2.$r1"
              },
              {
                "temp=": "$r"
              },
              "str",
              {
                "->": ".^.s"
              },
              [
                {
                  "#n": "$r1"
                }
              ],
              "/str",
              "/ev",
              {
                "*": ".^.c",
                "flg": 2
              },
              {
                "s": [
                  "^I'm fine.",
                  {
                    "->": "$r",
                    "var": true
                  },
                  null
                ],
                "c": [
                  "ev",
                  {
                    "^->": "start.0.g-0.2.c.$r2"
                  },
                  "/ev",
                  {
                    "temp=": "$r"
                  },
                  {
                    "->": ".^.^.s"
                  },
                  [
                    {
                      "#n": "$r2"
                    }
                  ],
                  {
                    "#": "{ \"sender\": 1 }"
                  },
                  "\n",
                  {
                    "->": "good_mood"
                  },
                  "\n",
                  null
                ]
              }
            ],
            [
              "ev",
              {
                "^->": "start.0.g-0.3.$r1"
              },
              {
                "temp=": "$r"
              },
              "str",
              {
                "->": ".^.s"
              },
              [
                {
                  "#n": "$r1"
                }
              ],
              "/str",
              "/ev",
              {
                "*": ".^.c",
                "flg": 2
              },
              {
                "s": [
                  "^I don't want to talk.",
                  {
                    "->": "$r",
                    "var": true
                  },
                  null
                ],
                "c": [
                  "ev",
                  {
                    "^->": "start.0.g-0.3.c.$r2"
                  },
                  "/ev",
                  {
                    "temp=": "$r"
                  },
                  {
                    "->": ".^.^.s"
                  },
                  [
                    {
                      "#n": "$r2"
                    }
                  ],
                  {
                    "#": "{ \"sender\": 1 }"
                  },
                  "\n",
                  {
                    "->": "bad_mood"
                  },
                  "\n",
                  null
                ]
              }
            ],
            {
              "#n": "g-0"
            }
          ],
          null
        ],
        {
          "#f": 3
        }
      ],
      "good_mood": [
        [
          [
            "^What's your birthday? ",
            {
              "#": "{ \"userInteraction\": { \"placeholder\": \"MM/DD/YYYY\", \"stateVar\": \"birthday\", \"type\": \"text\", \"handler\": \"birthdayToAge\", \"validator\": \"date\" } }"
            },
            "\n",
            [
              "ev",
              {
                "^->": "good_mood.0.g-0.3.$r1"
              },
              {
                "temp=": "$r"
              },
              "str",
              {
                "->": ".^.s"
              },
              [
                {
                  "#n": "$r1"
                }
              ],
              "/str",
              "/ev",
              {
                "*": ".^.c",
                "flg": 2
              },
              {
                "s": [
                  "^ ",
                  [
                    "G>",
                    "ev",
                    {
                      "VAR?": "birthday"
                    },
                    "out",
                    "/ev",
                    "G<",
                    null
                  ],
                  {
                    "->": "$r",
                    "var": true
                  },
                  null
                ],
                "c": [
                  "ev",
                  {
                    "^->": "good_mood.0.g-0.3.c.$r2"
                  },
                  "/ev",
                  {
                    "temp=": "$r"
                  },
                  {
                    "->": ".^.^.s"
                  },
                  [
                    {
                      "#n": "$r2"
                    }
                  ],
                  {
                    "#": "{ \"sender\": 1 }"
                  },
                  "\n",
                  "\n",
                  {
                    "->": ".^.^.^.^.g-1"
                  },
                  null
                ]
              }
            ],
            {
              "#n": "g-0"
            }
          ],
          {
            "g-1": [
              [
                "G>",
                [
                  "ev",
                  {
                    "VAR?": "validationError"
                  },
                  0,
                  "==",
                  "/ev",
                  {
                    "->": ".^.b",
                    "c": true
                  },
                  {
                    "b": [
                      {
                        "->": "user_age"
                      },
                      {
                        "->": ".^.^.^.3"
                      },
                      null
                    ]
                  }
                ],
                [
                  {
                    "->": ".^.b"
                  },
                  {
                    "b": [
                      {
                        "->": "date_validation_error"
                      },
                      {
                        "->": ".^.^.^.3"
                      },
                      null
                    ]
                  }
                ],
                "nop",
                "G<",
                null
              ],
              "\n",
              "done",
              null
            ]
          }
        ],
        {
          "#f": 3
        }
      ],
      "user_age": [
        [
          [
            "^So you are <strong>",
            [
              "G>",
              "ev",
              {
                "VAR?": "age"
              },
              "out",
              "/ev",
              "G<",
              null
            ],
            "^ years</strong> old.",
            "\n",
            [
              [
                "G>",
                [
                  "ev",
                  {
                    "VAR?": "age"
                  },
                  18,
                  ">=",
                  "/ev",
                  {
                    "->": ".^.b",
                    "c": true
                  },
                  {
                    "b": [
                      {
                        "->": "aviation_recipe"
                      },
                      {
                        "->": ".^.^.^.3"
                      },
                      null
                    ]
                  }
                ],
                [
                  {
                    "->": ".^.b"
                  },
                  {
                    "b": [
                      {
                        "->": "capri_sun"
                      },
                      {
                        "->": ".^.^.^.3"
                      },
                      null
                    ]
                  }
                ],
                "nop",
                "G<",
                null
              ],
              "\n",
              "done",
              {
                "#n": "g-1"
              }
            ],
            {
              "#n": "g-0"
            }
          ],
          null
        ],
        {
          "#f": 3
        }
      ],
      "date_validation_error": [
        [
          [
            "^Please input the date as specified (MM/DD/YYYY).",
            "\n",
            {
              "->": "good_mood"
            },
            {
              "#n": "g-0"
            }
          ],
          null
        ],
        {
          "#f": 3
        }
      ],
      "bad_mood": [
        [
          [
            "^Okay, I won't bother.",
            "\n",
            "end",
            {
              "#n": "g-0"
            }
          ],
          null
        ],
        {
          "#f": 3
        }
      ],
      "aviation_recipe": [
        [
          [
            "^Old enough for a great cocktail. 🍸 Here's the recipe for an <strong>Aviation</strong>:",
            "\n",
            [
              "^5 cl gin<br> 1.5 cl lemon juice<br> 1 cl maraschino liqueur<br> 0.7 cl crème de violette",
              "\n",
              [
                "^Shake, stir, strain and enjoy.",
                "\n",
                {
                  "->": "start_over"
                },
                {
                  "#n": "g-2"
                }
              ],
              {
                "#n": "g-1"
              }
            ],
            {
              "#n": "g-0"
            }
          ],
          null
        ],
        {
          "#f": 3
        }
      ],
      "capri_sun": [
        [
          [
            "^That's pretty young. Want some Capri Sun?",
            "\n",
            [
              "^<img src=\"assets/images/capri-sun.png\">",
              "\n",
              {
                "->": "start_over"
              },
              {
                "#n": "g-1"
              }
            ],
            {
              "#n": "g-0"
            }
          ],
          null
        ],
        {
          "#f": 3
        }
      ],
      "start_over": [
        [
          [
            "^Want to start over?",
            "\n",
            [
              "ev",
              {
                "^->": "start_over.0.g-0.2.$r1"
              },
              {
                "temp=": "$r"
              },
              "str",
              {
                "->": ".^.s"
              },
              [
                {
                  "#n": "$r1"
                }
              ],
              "/str",
              "/ev",
              {
                "*": ".^.c",
                "flg": 2
              },
              {
                "s": [
                  "^Sure.",
                  {
                    "->": "$r",
                    "var": true
                  },
                  null
                ],
                "c": [
                  "ev",
                  {
                    "^->": "start_over.0.g-0.2.c.$r2"
                  },
                  "/ev",
                  {
                    "temp=": "$r"
                  },
                  {
                    "->": ".^.^.s"
                  },
                  [
                    {
                      "#n": "$r2"
                    }
                  ],
                  {
                    "#": "{ \"sender\": 1 }"
                  },
                  "\n",
                  {
                    "->": "start"
                  },
                  "\n",
                  null
                ]
              }
            ],
            [
              "ev",
              {
                "^->": "start_over.0.g-0.3.$r1"
              },
              {
                "temp=": "$r"
              },
              "str",
              {
                "->": ".^.s"
              },
              [
                {
                  "#n": "$r1"
                }
              ],
              "/str",
              "/ev",
              {
                "*": ".^.c",
                "flg": 2
              },
              {
                "s": [
                  "^No, thank you.",
                  {
                    "->": "$r",
                    "var": true
                  },
                  null
                ],
                "c": [
                  "ev",
                  {
                    "^->": "start_over.0.g-0.3.c.$r2"
                  },
                  "/ev",
                  {
                    "temp=": "$r"
                  },
                  {
                    "->": ".^.^.s"
                  },
                  [
                    {
                      "#n": "$r2"
                    }
                  ],
                  {
                    "#": "{ \"sender\": 1 }"
                  },
                  "\n",
                  "\n",
                  "end",
                  null
                ]
              }
            ],
            {
              "#n": "g-0"
            }
          ],
          null
        ],
        {
          "#f": 3
        }
      ],
      "global decl": [
        "ev",
        0,
        {
          "VAR=": "age"
        },
        "str",
        "^06/16/1989",
        "/str",
        {
          "VAR=": "birthday"
        },
        0,
        {
          "VAR=": "validationError"
        },
        "/ev",
        "end",
        null
      ],
      "#f": 3
    }
  ],
  "listDefs": {}
}